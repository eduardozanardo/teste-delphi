----------------Tabela Pessoa--------------------

CREATE TABLE PESSOA (
    ID INTEGER NOT NULL,
    NOME VARCHAR(250) NOT NULL,
    CPF VARCHAR(11) NOT NULL)
	
ALTER TABLE PESSOA
ADD CONSTRAINT PK_PESSOA
PRIMARY KEY (ID)

ALTER TABLE PESSOA
ADD CONSTRAINT UNQ1_PESSOA
UNIQUE (CPF)

CREATE SEQUENCE GEN_PESSOA_ID

ALTER SEQUENCE GEN_PESSOA_ID RESTART WITH 0

-------------------------------------------------

-----------------Tabela Funcionario--------------

CREATE TABLE FUNCIONARIO (
    ID INTEGER NOT NULL,
    ID_PESSOA INTEGER NOT NULL,
    SALARIO NUMERIC(9,2) NOT NULL)
	
ALTER TABLE FUNCIONARIO
ADD CONSTRAINT PK_FUNCIONARIO
PRIMARY KEY (ID)

ALTER TABLE FUNCIONARIO
ADD CONSTRAINT FK_FUNCIONARIO_1
FOREIGN KEY (ID_PESSOA)
REFERENCES PESSOA(ID)
ON DELETE CASCADE
ON UPDATE CASCADE

CREATE SEQUENCE GEN_FUNCIONARIO_ID

ALTER SEQUENCE GEN_FUNCIONARIO_ID RESTART WITH 0;

-------------------------------------------------

-----------------Tabela Dependente---------------

CREATE TABLE DEPENDENTE (
    ID INTEGER NOT NULL,
    CALCULA_IR VARCHAR(1),
    CALCULA_INSS VARCHAR(1),
    ID_PESSOA INTEGER,
    ID_FUNCIONARIO INTEGER)
	
ALTER TABLE DEPENDENTE
ADD CONSTRAINT PK_DEPENDENTE
PRIMARY KEY (ID)

ALTER TABLE DEPENDENTE
ADD CONSTRAINT FK_DEPENDENTE_1
FOREIGN KEY (ID_PESSOA)
REFERENCES PESSOA(ID)
ON DELETE CASCADE
ON UPDATE CASCADE

ALTER TABLE DEPENDENTE
ADD CONSTRAINT FK_DEPENDENTE_3
FOREIGN KEY (ID_FUNCIONARIO)
REFERENCES FUNCIONARIO(ID)
ON DELETE CASCADE
ON UPDATE CASCADE

CREATE SEQUENCE GEN_DEPENDENTE_ID

ALTER SEQUENCE GEN_DEPENDENTE_ID RESTART WITH 0;
------------------------------------------------